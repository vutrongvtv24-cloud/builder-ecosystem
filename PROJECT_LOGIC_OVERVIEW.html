<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T·ªïng Quan Logic D·ª± √Ån - Tulanh Social</title>
    <!-- Style cho vƒÉn b·∫£n ƒë·∫πp gi·ªëng GitHub -->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.2.0/github-markdown-light.min.css">
    <style>
        body {
            box-sizing: border-box;
            min-width: 200px;
            max-width: 980px;
            margin: 0 auto;
            padding: 45px;
            background-color: #f6f8fa;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
            line-height: 1.6;
        }

        .markdown-body {
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            padding: 40px;
            border-radius: 12px;
            background: #fff;
        }

        /* Style ri√™ng cho s∆° ƒë·ªì mermaid */
        .mermaid {
            display: flex;
            justify-content: center;
            margin: 30px 0;
            background: #fcfcfc;
            padding: 20px;
            border: 1px solid #eee;
            border-radius: 8px;
        }

        .feature-box {
            border: 1px solid #e1e4e8;
            padding: 16px;
            border-radius: 6px;
            margin-bottom: 16px;
            background-color: #f6f8fa;
        }

        h2 {
            border-bottom: 2px solid #eaecef;
            padding-bottom: .3em;
        }
    </style>
</head>

<body>
    <article class="markdown-body" id="content">
        <!-- N·ªôi dung s·∫Ω ƒë∆∞·ª£c render t·∫°i ƒë√¢y -->
    </article>

    <!-- Th∆∞ vi·ªán x·ª≠ l√Ω Markdown v√† V·∫Ω s∆° ƒë·ªì -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
    </script>

    <!-- N·ªòI DUNG MARKDOWN (CH·ªàNH S·ª¨A ·ªû ƒê√ÇY) -->
    <script id="raw-markdown" type="text/markdown">

# üó∫Ô∏è B·∫£n ƒê·ªì Logic & Ki·∫øn Tr√∫c D·ª± √Ån: Tulanh Social

> **M·ª•c ti√™u:** T√†i li·ªáu n√†y ph√°c th·∫£o to√†n b·ªô c√°ch th·ª©c ho·∫°t ƒë·ªông c·ªßa website **Tulanh Social** (M·∫°ng x√£ h·ªôi d√†nh cho Winner & Vozer) m·ªôt c√°ch tr·ª±c quan, d·ªÖ hi·ªÉu nh·∫•t cho c·∫£ Developer v√† User.

---

## 1. T·ªïng Quan: ƒê√¢y l√† c√°i g√¨?

**Tulanh Social** l√† m·ªôt m·∫°ng x√£ h·ªôi k·∫øt h·ª£p v·ªõi c√¥ng c·ª• ph√°t tri·ªÉn b·∫£n th√¢n. N√≥ kh√¥ng ch·ªâ l√† n∆°i ƒë·ªÉ l∆∞·ªõt tin (Feed) m√† c√≤n l√† n∆°i ƒë·ªÉ l√†m vi·ªác (Todo, Journal) v√† thƒÉng ti·∫øn (Gamification).

*   **ƒê·ªëi t∆∞·ª£ng:** Builders, Makers, Vozer, nh·ªØng ng∆∞·ªùi mu·ªën chia s·∫ª v√† ph√°t tri·ªÉn.
*   **ƒêi·ªÉm kh√°c bi·ªát:** C∆° ch·∫ø duy·ªát b√†i c·ªông ƒë·ªìng (Community Vote) v√† H·ªá th·ªëng C·∫•p ƒë·ªô (Level System).

---

## 2. H√†nh Tr√¨nh Ng∆∞·ªùi D√πng (User Journey)

Khi m·ªôt ng∆∞·ªùi d√πng m·ªõi truy c·∫≠p v√†o website, h·ªç s·∫Ω ƒëi qua c√°c b∆∞·ªõc sau:

```mermaid
graph LR
    A[Kh√°ch truy c·∫≠p] -->|V√†o trang ch·ªß| B{ƒê√£ ƒëƒÉng nh·∫≠p?}
    B -->|Ch∆∞a| C[Landing Page]
    B -->|R·ªìi| D[News Feed]
    
    C -->|B·∫•m Login| E[ƒêƒÉng nh·∫≠p Google]
    E --> D
    
    D --> F[T∆∞∆°ng t√°c]
    F --> G[ƒêƒÉng B√†i]
    F --> H[B√¨nh lu·∫≠n / Like]
    F --> I[Nh·∫Øn tin]
    F --> J[X√†i Tool (Todo/Journal)]
```

---

## 3. Chi Ti·∫øt C√°c T√≠nh NƒÉng C·ªët L√µi (Core Logic)

### üõ°Ô∏è A. H·ªá Th·ªëng Duy·ªát B√†i ("B·ªô L·ªçc")

ƒê·ªÉ tr√°nh r√°c (spam), b√†i vi·∫øt kh√¥ng hi·ªán ngay l·∫≠p t·ª©c m√† ph·∫£i qua "B·ªô L·ªçc".

**Quy t·∫Øc "B·ªô L·ªçc":**
1.  **Admin** c√≥ quy·ªÅn quy·∫øt ƒë·ªãnh t·ªëi cao (Duy·ªát/X√≥a ngay).
2.  **C·ªông ƒë·ªìng** c√≥ quy·ªÅn bi·ªÉu quy·∫øt (Vote).
3.  N·∫øu **> 50%** ng∆∞·ªùi d√πng active ƒë·ªìng √Ω -> B√†i vi·∫øt ƒë∆∞·ª£c duy·ªát t·ª± ƒë·ªông.

```mermaid
sequenceDiagram
    participant User as Ng∆∞·ªùi d√πng A
    participant System as H·ªá Th·ªëng
    participant Admin as Admin/Mod
    participant Community as C·ªông ƒê·ªìng

    User->>System: ƒêƒÉng b√†i vi·∫øt m·ªõi
    System->>System: G√°n tr·∫°ng th√°i "Ch·ªù duy·ªát" (Pending)
    
    par X·ª≠ l√Ω song song
        Admin->>System: Ki·ªÉm tra & Duy·ªát (Th·ªß c√¥ng)
    and
        Community->>System: Vote Duy·ªát b√†i
    end
    
    alt N·∫øu Admin duy·ªát
        System-->>User: Th√¥ng b√°o: B√†i ƒë√£ l√™n s√≥ng!
        System->>Community: Hi·ªÉn th·ªã b√†i vi·∫øt (Public)
    else N·∫øu Vote > 50%
        System-->>User: Th√¥ng b√°o: C·ªông ƒë·ªìng ƒë√£ duy·ªát b√†i!
        System->>Community: Hi·ªÉn th·ªã b√†i vi·∫øt (Public)
    else N·∫øu b·ªã T·ª´ ch·ªëi
        System-->>User: B√†i vi·∫øt b·ªã t·ª´ ch·ªëi/x√≥a.
    end
```

### üéÆ B. H·ªá Th·ªëng Gamification (ƒê·ªông L·ª±c)

L√†m sao ƒë·ªÉ ng∆∞·ªùi d√πng chƒÉm ch·ªâ t∆∞∆°ng t√°c? Ch√∫ng ta d√πng **XP (ƒêi·ªÉm kinh nghi·ªám)** v√† **Level**.

*   **Level 1 (Newbie):** Ng∆∞·ªùi m·ªõi, ch∆∞a c√≥ g√¨ (0 XP).
*   **Level 5 (Huy·ªÅn tho·∫°i):** C·∫•p t·ªëi ƒëa (5000 XP).

**C√°ch ki·∫øm ƒëi·ªÉm:**
| H√†nh ƒë·ªông | ƒêi·ªÉm th∆∞·ªüng |
| :--- | :--- |
| ƒêƒÉng b√†i vi·∫øt | **+10 XP** |
| B√¨nh lu·∫≠n d·∫°o | **+5 XP** |
| Th·∫£ tim (Like) | **+2 XP** |

```mermaid
graph TD
    A[H√†nh ƒë·ªông User] -->|T√≠ch l≈©y| B(T·ªïng XP)
    B --> C{Ki·ªÉm tra Level}
    C -->|ƒê·ªß ƒëi·ªÉm| D[L√™n C·∫•p!]
    C -->|Ch∆∞a ƒë·ªß| E[Gi·ªØ nguy√™n]
    
    D --> F[M·ªü kh√≥a t√≠nh nƒÉng VIP]
    D --> G[Huy hi·ªáu Profile ƒë·∫πp h∆°n]
```

### üí¨ C. H·ªá Th·ªëng Chat (Nh·∫Øn Tin)

Gi√∫p ng∆∞·ªùi d√πng k·∫øt n·ªëi ri√™ng t∆∞.

*   **Realtime:** Tin nh·∫Øn hi·ªán ngay l·∫≠p t·ª©c kh√¥ng c·∫ßn F5 (nh·ªù Supabase Realtime).
*   **Ri√™ng t∆∞:** Ch·ªâ ng∆∞·ªùi trong cu·ªôc tr√≤ chuy·ªán m·ªõi xem ƒë∆∞·ª£c tin nh·∫Øn (B·∫£o m·∫≠t RLS).

```mermaid
sequenceDiagram
    participant U1 as User A
    participant DB as M√°y Ch·ªß (Supabase)
    participant U2 as User B

    U1->>DB: G·ª≠i tin nh·∫Øn "Hello"
    DB->>DB: L∆∞u v√†o Database
    DB->>U2: B·∫Øn t√≠n hi·ªáu (Realtime)
    U2->>U2: Hi·ªÉn th·ªã "Hello" ngay l·∫≠p t·ª©c
```

---

## 4. C·∫•u Tr√∫c D·ªØ Li·ªáu (Database)

D·ªØ li·ªáu ƒë∆∞·ª£c l∆∞u tr·ªØ trong **Supabase (PostgreSQL)**. ƒê√¢y l√† s∆° ƒë·ªì ƒë∆°n gi·∫£n h√≥a c√°c b·∫£ng ch√≠nh:

```mermaid
erDiagram
    PROFILES ||--o{ POSTS : writes
    PROFILES {
        string id PK "ID ng∆∞·ªùi d√πng"
        string email
        int level "C·∫•p ƒë·ªô"
        int xp "ƒêi·ªÉm kinh nghi·ªám"
    }

    POSTS ||--o{ COMMENTS : has
    POSTS ||--o{ APPROVALS : cho_duyet
    POSTS {
        string id PK
        string content "N·ªôi dung b√†i"
        string status "Pending / Approved"
    }

    CONVERSATIONS ||--o{ MESSAGES : contains
    CONVERSATIONS {
        string id PK
        timestamptz updated_at
    }

    MESSAGES {
        string content "N·ªôi dung chat"
        string sender_id FK "Ng∆∞·ªùi g·ª≠i"
    }
```

---

## 5. H·∫° T·∫ßng K·ªπ Thu·∫≠t (Deployment)

Website ƒëang ch·∫°y ·ªü ƒë√¢u v√† nh∆∞ th·∫ø n√†o?

*   **Frontend:** Vi·∫øt b·∫±ng **Next.js**, ch·∫°y tr√™n VPS Ubuntu.
*   **Database:** Thu√™ d·ªãch v·ª• **Supabase (Cloud)**.
*   **VPS:** M√°y ch·ªß ·∫£o ch·∫°y **Nginx** ƒë·ªÉ ƒëi·ªÅu h∆∞·ªõng traffic.

```mermaid
graph TD
    User((Ng∆∞·ªùi d√πng)) -->|Truy c·∫≠p tulanh.online| CF[Cloudflare / DNS]
    CF -->|Tr·ªè v·ªÅ IP| VPS[VPS Ubuntu (43.228.214.174)]
    
    subgraph "B√™n trong VPS"
        Nginx[Nginx Web Server] -->|Reverse Proxy| PM2[PM2 Process Manager]
        PM2 -->|Ch·∫°y| NextApps[Next.js App (Port 3000)]
    end
    
    NextApps -->|L·∫•y d·ªØ li·ªáu| DB[(Supabase Database)]
```

---

## 6. T·ªïng K·∫øt

D·ª± √°n **Tulanh Social** l√† m·ªôt h·ªá th·ªëng kh√©p k√≠n, t·ª± ƒë·ªông h√≥a cao:
1.  **T·ª± ƒë·ªông Duy·ªát b√†i** d·ª±a tr√™n vote.
2.  **T·ª± ƒë·ªông Th∆∞·ªüng ƒëi·ªÉm** khi t∆∞∆°ng t√°c.
3.  **Chat Realtime** ƒë·ªÉ gi·ªØ ch√¢n ng∆∞·ªùi d√πng.
4.  **H·∫° t·∫ßng VPS ri√™ng** gi√∫p ch·ªß ƒë·ªông qu·∫£n l√Ω d·ªØ li·ªáu.

    </script>

    <script>
        // Render Markdown
        const markdownInput = document.getElementById('raw-markdown').innerHTML;
        const contentDiv = document.getElementById('content');
        contentDiv.innerHTML = marked.parse(markdownInput);
    </script>
</body>

</html>